<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>For My BABU ‚ù§Ô∏è</title>

<style>
:root {
    --pink: #ff2e63; 
    --glass: rgba(255, 255, 255, .22);
}

/* ===== BASE STYLES ===== */
body {
    margin: 0;
    min-height: 100svh; /* safest viewport height */
    background: linear-gradient(135deg, #ff4e8d, #ff9a9e);
    font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    padding: env(safe-area-inset-top) 
             env(safe-area-inset-right) 
             env(safe-area-inset-bottom) 
             env(safe-area-inset-left);
    box-sizing: border-box;
}


/* ===== BACKGROUND HEARTS ===== */
.heart {
    position: fixed;
    bottom: -20px;
    opacity: .6;
    animation: floatUp linear infinite;
    pointer-events: none;
    z-index: 0;
}
@keyframes floatUp {
    to { transform: translateY(-120vh); opacity: 0; }
}

/* ===== CARD STYLES ===== */
.card {
    background: var(--glass);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    padding: 30px 20px;
    border-radius: 24px;
    width: 100%;
    max-width: 400px; /* Slightly wider for better text flow */
    text-align: center;
    box-shadow: 0 15px 35px rgba(0,0,0,0.2);
    display: none;
    border: 1px solid rgba(255,255,255,0.3);
    z-index: 10;
    box-sizing: border-box;
}

.day-emoji { 
    font-size: clamp(50px, 15vw, 80px); /* Responsive sizing */
    margin-bottom: 10px; 
    display: block; 
    filter: drop-shadow(0 0 10px rgba(0,0,0,0.1)); 
}

h2 { font-size: clamp(1.2rem, 5vw, 1.8rem); margin: 10px 0; }
p { font-size: clamp(0.9rem, 4vw, 1.1rem); line-height: 1.4; }

/* ===== BUTTONS ===== */
.buttons-row {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
}

button {
    padding: 12px 20px;
    border-radius: 35px;
    border: none;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s ease;
    font-weight: bold;
    flex: 1; /* Makes buttons grow equally */
    min-width: 140px;
    max-width: 250px;
}

button:active { transform: scale(.90); }

#unlockBtn, #nextBtn, #yesBtn, #actionBtn {
    background: var(--pink);
    color: white;
    box-shadow: 0 4px 15px rgba(255, 46, 99, 0.4);
}

#noBtn {
    background: white;
    color: var(--pink);
    position: absolute;   /* üîë important */
    transition: left 0.25s ease, top 0.25s ease;
}

.card {
    position: relative;   /* üîë parent boundary */
}


/* ===== POPUP STYLES ===== */
#tempPopup {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    color: #ff2e63;
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    z-index: 100;
    width: 80%;
    max-width: 300px;
    text-align: center;
    font-weight: bold;
    border: 3px solid #ff2e63;
}
.overlay {
    display: none;
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 99;
}

/* ===== EFFECTS & SLIDESHOW ===== */
.glow { animation: pulse 1.5s infinite; }
@keyframes pulse { 
    0% {box-shadow: 0 0 0 0 rgba(255, 46, 99, 0.7);} 
    70% {box-shadow: 0 0 0 15px rgba(255, 46, 99, 0);} 
    100% {box-shadow: 0 0 0 0 rgba(255, 46, 99, 0);} 
}

#slideshow { display: none; margin-top: 20px; width: 100%; }
.slide { display: none; }
.slide.active { display: block; animation: fadeIn 0.5s; }
@keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }

.slide img { 
    width: 100%; 
    height: auto; 
    max-height: 400px; /* Prevents card from getting too tall */
    object-fit: cover;
    border-radius: 15px; 
    border: 3px solid white; 
}

.caption { font-size: 14px; margin-top: 10px; font-style: italic; opacity: 0.9; }

#lockScreen input {
    padding: 15px;
    border-radius: 25px;
    border: 1px solid rgba(255,255,255,0.5);
    width: 90%;
    margin-bottom: 15px;
    text-align: center;
    font-size: 16px;
    background: rgba(255,255,255,0.1);
    color: white;
    outline: none;
}
#lockScreen input::placeholder { color: rgba(255,255,255,0.7); }
</style>
</head>


<body>

<div id="overlay" class="overlay"></div>
<div id="tempPopup">
    <p>This is for you..‚ù§Ô∏è‚ù£Ô∏è‚ú®Ô∏è<br>..............<br> I got attached to you without planning it. It just happened. One day you were there, and suddenly you mattered too much. I think about you in small quiet moments, when nothing is happening. I care in ways I don't know how to explain without sounding foolish. You stay in my head, in my habits, in my feelings. Even when I try not to, it's always you. That's the truth I don't hide anymore..üíñüíñ</p>
    <button id="closePopup" style="min-width: 80px; padding: 8px;">Okay! ü•∞</button>
</div>

<audio id="bgMusic" loop preload="auto" src="hirohasaimoto-fruit-of-the-heart-454938.mp3"></audio>

<audio id="voiceNote" preload="auto" src="my-voice-for-you.mp3"></audio> 


<div id="lockScreen" class="card" style="display:block">
    <h2>üîí For Risha's Eyes Only</h2>
    <p>Enter our secret word üíï</p>
    <input id="password" type="password" placeholder="Password..."><br>
    <button id="unlockBtn">Unlock My Heart ‚ù§Ô∏è</button>
</div>

<div id="dailyCard" class="card">
    <span id="dayEmoji" class="day-emoji">üåπ</span>
    <h2 id="dayTitle">Happy Rose Day!</h2>
    <p id="dayMessage"></p>
    <button id="nextBtn">I Have a Question... üëâ</button>
</div>

<div id="mainCard" class="card">
    <h2 id="questionText">Risha‚Ä¶ will you be my Valentine? üíñ</h2>
    <div class="buttons-row">
        <button id="yesBtn">Yes BABU üíï</button>
        <button id="noBtn">No üò¢</button>
    </div>
    <div id="message" style="margin-top: 15px; font-weight: bold;"></div>
    <div id="counter" style="font-size: 12px; margin-top: 10px; opacity: 0.8;"></div>
    
    <button id="actionBtn" style="display:none; margin: 20xpx auto;"></button>
    <button id="voiceBtn"
        style="display:none; margin-top:12px; background:white; color:#ff2e63;">
    ‚ñ∂Ô∏è Use Headphone ü•∫üéß
    </button>

    
    

    <div id="slideshow">
        <div class="slide active"><img src="photo1.jpeg"><p class="caption">The way you hug me... ü•∫</p></div>
        <div class="slide"><img src="photo2.jpeg"><p class="caption">That smile is my favorite thing ‚ù§Ô∏è</p></div>
        <div class="slide"><img src="photo3.jpeg"><p class="caption">Every moment with you is a gift.</p></div>
    </div>
</div>

<script>
  
const convinceTexts = [
  "Are you sure? ü•∫",
  "Think again BABU‚Ä¶ üíï",
  "My heart will be sad üò¢",
  "Okay but‚Ä¶ I really love you ‚ù§Ô∏è",
  "Last chance üòåüíñ"
];

/* --- CONFIGURATION --- */
const PASSWORD = "Forever"; 
const WHATSAPP_NUMBER = "917478640411";

/* --- DAILY DATA --- */
const valentineData = {
    7: { emoji: "üåπ", title: "Happy Rose Day!", msg: "A rose for the girl who makes my life smell like heaven.", btnText: "Send a Rose üåπ", wa: "Happy Rose Day BABU! üåπ\n\nI accepted your rose because you're the most beautiful flower in my garden." },
    8: { emoji: "üíç", title: "Happy Propose Day!", msg: "I'm not just asking for today, I'm asking for every tomorrow.", btnText: "Send a Propose üíç", wa: "Happy Propose Day! üíç\n\nI said YES to being your Valentine!" },
    9: { emoji: "üç´", title: "Happy Chocolate Day!", msg: "You're sweeter than Dairy Milk and silkier than Galaxy, BABU.", btnText: "Send a Chocolate üç´", wa: "Happy Chocolate Day! üç´\n\nEverything is sweeter when I'm with you." },
    10: { emoji: "üß∏", title: "Happy Teddy Day!", msg: "Sending you a virtual hug-machine since I'm not there to squeeze you.", btnText: "Send a Teddy üß∏", wa: "Happy Teddy Day! üß∏\n\nYou're my favorite teddy bear!" },
    11: { emoji: "ü§ù", title: "Happy Promise Day!", msg: "I promise to choose you, even on the days we don't understand each other.", btnText: "Send a Promise ü§ù", wa: "Happy Promise Day! ü§ù\n\nI promise to keep choosing you every single day." },
    12: { emoji: "ü´Ç", title: "Happy Hug Day!", msg: "Your hugs are my 'Safe Zone'. I miss being in your arms.", btnText: "Send a Hug ü´Ç", wa: "Happy Hug Day! ü´Ç\n\nI wish I could hug you for real right now." },
    13: { emoji: "üíã", title: "Happy Kiss Day!", msg: "A million virtual kisses are waiting for you right here.", btnText: "Send a Kiss üíã", wa: "Happy Kiss Day! üíã\n\nMUAH! Happy Valentine's Week! ‚ù§Ô∏è" },
    14: { emoji: "üíù", title: "Happy Valentine's Day!", msg: "My heart found its home in you, Risha. Today and forever.", btnText: "Send Love üíñ", wa: "HAPPY VALENTINE'S DAY BABU! üíñ\n\nI love you more than words can say." }
};

const today = new Date();
const d = today.getDate();
const m = today.getMonth() + 1;

const lockScreen = document.getElementById("lockScreen");
const dailyCard = document.getElementById("dailyCard");
const mainCard = document.getElementById("mainCard");
    
const BG_NORMAL_VOL = 0.6;   // normal background level
const BG_DUCK_VOL   = 0.15;  // while voice plays
    
const bgMusic = document.getElementById("bgMusic");
bgMusic.volume = BG_NORMAL_VOL;
const actionBtn = document.getElementById("actionBtn");

function typeMessage(text, speed = 45) {
    message.innerHTML = "";
    let i = 0;

    const typing = setInterval(() => {
        message.innerHTML += text.charAt(i);
        i++;
        if (i >= text.length) clearInterval(typing);
    }, speed);
}

function heartbeatVibration() {
    if ("vibrate" in navigator) {
        navigator.vibrate([80, 40, 80, 40, 120]);
    }
}


// 1. Unlock Logic
document.getElementById("unlockBtn").onclick = () => {
    if(document.getElementById("password").value.toLowerCase() === PASSWORD.toLowerCase()) {
        lockScreen.style.display = "none";
        if(m === 2 && valentineData[d]) {
            const data = valentineData[d];
            document.getElementById("dayEmoji").innerText = data.emoji;
            document.getElementById("dayTitle").innerText = data.title;
            document.getElementById("dayMessage").innerText = data.msg;
            actionBtn.innerText = data.btnText; 
            dailyCard.style.display = "block";
        } else {
            actionBtn.innerText = "Send Love ‚ù§Ô∏è";
            mainCard.style.display = "block";
        }
        bgMusic.play().catch(e => console.log("Music play blocked"));
    } else {
        alert("Wrong password, BABU! ‚ùå");
    }
};

document.getElementById("nextBtn").onclick = () => {
    dailyCard.style.display = "none";
    mainCard.style.display = "block";
};

// 2. Responsive "No" Button Logic
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
let escapes = 0;

function moveNo() {
    escapes++;

    const card = mainCard.getBoundingClientRect();
    const no   = noBtn.getBoundingClientRect();
    const yes  = yesBtn.getBoundingClientRect();

    const padding = 12;

    const maxX = card.width - no.width - padding;
    const maxY = card.height - no.height - padding;

    // YES position relative to card
    const yesRel = {
        left: yes.left - card.left,
        top: yes.top - card.top,
        right: yes.left - card.left + yes.width,
        bottom: yes.top - card.top + yes.height
    };

    let x, y, tries = 0;

    do {
        x = Math.random() * maxX;
        y = Math.random() * maxY;
        tries++;

        const noRel = {
            left: x,
            top: y,
            right: x + no.width,
            bottom: y + no.height
        };

        const overlap =
            !(noRel.right < yesRel.left ||
              noRel.left > yesRel.right ||
              noRel.bottom < yesRel.top ||
              noRel.top > yesRel.bottom);

        if (!overlap) break;

    } while (tries < 30); // strong safety limit

    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";

    /* üí¨ WhatsApp typing */
    if (escapes <= convinceTexts.length) {
        typeMessage(convinceTexts[escapes - 1]);
    }

    /* üíì Heartbeat */
    heartbeatVibration();

    /* YES grows safely */
    yesBtn.style.transform = `scale(${1 + escapes * 0.12})`;
    yesBtn.classList.add("glow");

    counter.innerText = `Still saying no? ${escapes} times üòÜ`;

    /* Auto YES */
    if (escapes >= 6) {
        typeMessage("Okay‚Ä¶ I‚Äôll take that as a YES ‚ù§Ô∏è");
        setTimeout(() => yesBtn.click(), 1200);
    }
}



noBtn.onmouseenter = moveNo;
noBtn.ontouchstart = (e) => {
    e.preventDefault();
    moveNo();
};

yesBtn.onclick = () => {
    // Check if date is 11 or 12 (February is month 2)
    const todayDate = new Date().getDate();
    const todayMonth = new Date().getMonth() + 1;

    if (todayMonth === 2 && (todayDate === 11 || todayDate === 12)) {
        document.getElementById("overlay").style.display = "block";
        document.getElementById("tempPopup").style.display = "block";
        
        document.getElementById("closePopup").onclick = () => {
            document.getElementById("overlay").style.display = "none";
            document.getElementById("tempPopup").style.display = "none";
            completeLoveAction(); // Continue to final screen
        };
    } else {
        completeLoveAction(); // Just show final screen if other date
    }
};

// Move your original "Yes" logic into this helper function
function completeLoveAction() {
    navigator.vibrate?.([150, 80, 150, 80, 200]);
    yesBtn.style.display = noBtn.style.display = "none";
    document.getElementById("questionText").style.display = "none";
    actionBtn.style.display = "inline-block";
    document.getElementById("message").innerHTML = "You're stuck with me now! ‚ù§Ô∏è<br>I Love You!";
    document.getElementById("slideshow").style.display = "block";
    startSlideshow();
    voiceBtn.style.display = "inline-block";
}

actionBtn.onclick = () => {
    const defaultMsg = "Hey BABU! I love the surprise! ‚ù§Ô∏è";
    const baseMsg = (m === 2 && valentineData[d]) ? valentineData[d].wa : defaultMsg;
    const extra = "\n\n(p.s. please unblock me, I promise not to disturb you frequently! ü•∫)";
    window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(baseMsg + extra)}`, "_blank");
};

const voiceBtn = document.getElementById("voiceBtn");
const voiceNote = document.getElementById("voiceNote");

voiceBtn.onclick = () => {
    voiceNote.currentTime = 0;

    // fade background music down
    fadeVolume(bgMusic, BG_DUCK_VOL, 500);

    voiceNote.play().catch(()=>{});

    // when voice ends, restore bg music
    voiceNote.onended = () => {
        fadeVolume(bgMusic, BG_NORMAL_VOL, 600);
    };
};
    
voiceNote.onplay = () => {
    typeMessage("Listen carefully‚Ä¶ this is from my heart üíì");
};

function fadeVolume(audio, target, duration = 500) {
    const stepTime = 30;
    const steps = duration / stepTime;
    const start = audio.volume;
    const step = (target - start) / steps;
    let currentStep = 0;

    const fade = setInterval(() => {
        currentStep++;
        audio.volume = Math.min(1, Math.max(0, audio.volume + step));
        if (currentStep >= steps) {
            audio.volume = target;
            clearInterval(fade);
        }
    }, stepTime);
}


function startSlideshow() {
    let slides = document.querySelectorAll(".slide");
    let i = 0;
    setInterval(() => {
        slides.forEach(s => s.classList.remove("active"));
        i = (i + 1) % slides.length;
        slides[i].classList.add("active");
    }, 3500);
}

// Background Hearts
for(let i=0;i<15;i++){
    const h=document.createElement("div");
    h.className="heart";
    h.innerText=["‚ù§Ô∏è","üíñ","üíï"][Math.floor(Math.random()*3)];
    h.style.left=Math.random()*100+"vw";
    h.style.animationDuration=4+Math.random()*4+"s";
    h.style.fontSize=12+Math.random()*20+"px";
    document.body.appendChild(h);
}
</script>
</body>
</html>
