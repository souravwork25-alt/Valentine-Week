<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>For My BABU â¤ï¸</title>

<style>
:root {
    --pink: #ff2e63; 
    --glass: rgba(255, 255, 255, .22);
}

/* ===== BASE STYLES ===== */
body {
    margin: 0;
    min-height: 100svh; /* safest viewport height */
    background: linear-gradient(135deg, #ff4e8d, #ff9a9e);
    font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    padding: env(safe-area-inset-top) 
             env(safe-area-inset-right) 
             env(safe-area-inset-bottom) 
             env(safe-area-inset-left);
    box-sizing: border-box;
}


/* ===== BACKGROUND HEARTS ===== */
.heart {
    position: fixed;
    bottom: -20px;
    opacity: .6;
    animation: floatUp linear infinite;
    pointer-events: none;
    z-index: 0;
}
@keyframes floatUp {
    to { transform: translateY(-120vh); opacity: 0; }
}

/* ===== CARD STYLES ===== */
.card {
    background: var(--glass);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    padding: 30px 20px;
    border-radius: 24px;
    width: 100%;
    max-width: 400px; /* Slightly wider for better text flow */
    text-align: center;
    box-shadow: 0 15px 35px rgba(0,0,0,0.2);
    display: none;
    border: 1px solid rgba(255,255,255,0.3);
    z-index: 10;
    box-sizing: border-box;
}

.day-emoji { 
    font-size: clamp(50px, 15vw, 80px); /* Responsive sizing */
    margin-bottom: 10px; 
    display: block; 
    filter: drop-shadow(0 0 10px rgba(0,0,0,0.1)); 
}

h2 { font-size: clamp(1.2rem, 5vw, 1.8rem); margin: 10px 0; }
p { font-size: clamp(0.9rem, 4vw, 1.1rem); line-height: 1.4; }

/* ===== BUTTONS ===== */
.buttons-row {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
}

button {
    padding: 12px 20px;
    border-radius: 35px;
    border: none;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s ease;
    font-weight: bold;
    flex: 1; /* Makes buttons grow equally */
    min-width: 140px;
    max-width: 250px;
}

button:active { transform: scale(.90); }

#unlockBtn, #nextBtn, #yesBtn, #actionBtn {
    background: var(--pink);
    color: white;
    box-shadow: 0 4px 15px rgba(255, 46, 99, 0.4);
}

#noBtn {
    background: white;
    color: var(--pink);
    position: absolute;   /* ğŸ”‘ important */
    transition: left 0.25s ease, top 0.25s ease;
}

.card {
    position: relative;   /* ğŸ”‘ parent boundary */
}


/* ===== CELEBRATION EMOJIS ===== */
.celebrate {
    position: fixed;
    bottom: -40px;
    pointer-events: none;
    z-index: 200;
    animation: celebrateUp linear forwards;
}

@keyframes celebrateUp {
    0% {
        transform: translateY(0) scale(0.8);
        opacity: 1;
    }
    100% {
        transform: translateY(-110vh) scale(1.4);
        opacity: 0;
    }
}

/* ===== ROSE PETALS FALL ===== */
.petal {
    position: fixed;
    top: -40px;
    pointer-events: none;
    z-index: 180;
    animation: fall linear forwards;
}

@keyframes fall {
    0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translateY(110vh) rotate(360deg);
        opacity: 0;
    }
}


/* ===== POPUP STYLES ===== */
#tempPopup {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    color: #ff2e63;
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    z-index: 100;
    width: 90%;
    max-width: 360px;
    max-height: 70vh;        /* ğŸ‘ˆ limits height */
    overflow-y: auto;        /* ğŸ‘ˆ enables scrolling */
    text-align: center;
    font-weight: bold;
    border: 3px solid #ff2e63;
    -webkit-overflow-scrolling: touch; /* smooth iOS scroll */
}

.overlay {
    display: none;
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 99;
}

/* ===== EFFECTS & SLIDESHOW ===== */
.glow { animation: pulse 1.5s infinite; }
@keyframes pulse { 
    0% {box-shadow: 0 0 0 0 rgba(255, 46, 99, 0.7);} 
    70% {box-shadow: 0 0 0 15px rgba(255, 46, 99, 0);} 
    100% {box-shadow: 0 0 0 0 rgba(255, 46, 99, 0);} 
}

#slideshow { display: none; margin-top: 20px; width: 100%; }
.slide { display: none; }
.slide.active { display: block; animation: fadeIn 0.5s; }
@keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }

.slide img { 
    width: 100%; 
    height: auto; 
    max-height: 400px; /* Prevents card from getting too tall */
    object-fit: cover;
    border-radius: 15px; 
    border: 3px solid white; 
}

.caption { font-size: 14px; margin-top: 10px; font-style: italic; opacity: 0.9; }

#lockScreen input {
    padding: 15px;
    border-radius: 25px;
    border: 1px solid rgba(255,255,255,0.5);
    width: 90%;
    margin-bottom: 15px;
    text-align: center;
    font-size: 16px;
    background: rgba(255,255,255,0.1);
    color: white;
    outline: none;
}
#lockScreen input::placeholder { color: rgba(255,255,255,0.7); }
</style>
</head>


<body>

<div id="overlay" class="overlay"></div>
<!-- IMAGE POPUP -->
<div id="imagePopup" style="
    display:none;
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:white;
    padding:15px;
    border-radius:20px;
    box-shadow:0 10px 30px rgba(0,0,0,0.3);
    z-index:101;
    width:85%;
    max-width:320px;
    text-align:center;
    border:3px solid #ff2e63;
">
    <img src="5.jpg"
         style="width:100%; border-radius:12px;">
    <p style="color:#ff2e63; font-weight:bold; margin-top:8px;">
        Out of everyone in the world, my heart still chooses youâ€”today, tomorrow, and alwaysâ€¦ Happy Valentineâ€™s Day, ALABU â¤ï¸
    </p>
    <button id="imageNextBtn" 
            style="margin-top:10px; padding:8px 18px;">
        Next ğŸ’•
    </button>
</div>

<div id="tempPopup">

    <div style="max-height:50vh; overflow-y:auto; padding-right:5px;">
        <p>
        This is for you..â¤ï¸â£ï¸âœ¨<br>I may never be able to tell you this, but I feel like I have already married you. Not in a temple, not in front of people, but deep inside my heart.<br> Iâ€™ve been sitting here for a long time trying to figure out if I even have the right to send this. Itâ€™s Valentineâ€™s Day, and I know Iâ€™m the one who walked away; Iâ€™m the one who broke the very heart I should have protected. But I saw something today that reminded me of us, and it hit me how much Iâ€™ve lost.<br>  Iâ€™m realizing now that while I was busy running or being careless, I was throwing away the only peace I ever really had. I miss the way we just 'fit.' I miss the way you chose me, even when I was hard to choose. Iâ€™m so sorry I wasnâ€™t strong enough to choose you back that time with the same loyalty. My heart still feels tied to yours, even if Iâ€™m the reason weâ€™re apart today. <br> I see now that I didn't just lose a relationship; I lost my person.<br> i love you more than myself. But I failed at that. I let the chaos win, and I broke your heart in the process. But looking back, I realize that in my head and my heart, I had already committed to you in ways I didn't even understand at the time.<br> I miss your smileâ€”the one that used to heal me when I was at my worst. I miss your presence, that feeling that as long as you were there, I was safe. Iâ€™m living with the weight of my mistakes now, and itâ€™s heavy. I hope youâ€™re surrounded by the kind of love today that I was too blind to give you back then <br> Last I want to say somthing......<br>  <br>Agar hona chahu tera Tum hone doge kya,,<br> Rona chahu tere pass aake Tum rone dogi kya,<br>  <br>Chain nahi mil raha ab Mujhe kahi pe, <br> Tum apne dil mein chain Se rehne dogi kya" <br>  <br> Thank you for understanding my silence and being my peace in the chaos. I choose you today, and every day after. â¤ï¸ #ValentinesDay #Soulmate"
        </p>
    </div>

    <button id="closePopup"
        style="min-width: 80px; padding: 8px; margin-top: 10px;">
        Okay! ğŸ¥°
    </button>

</div>


<audio id="bgMusic" loop preload="auto" src="hirohasaimoto-fruit-of-the-heart-454938.mp3"></audio>

<audio id="voiceNote" preload="auto" src="extracted-audio.mp3"></audio> 

<audio id="celebrateSound" preload="auto"
src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_9c6c7c3b6a.mp3">
</audio>



<div id="lockScreen" class="card" style="display:block">
    <h2>ğŸ”’ For Risha's Eyes Only</h2>
    <p>Enter our secret word ğŸ’•</p>
    <input id="password" type="password" placeholder="Password..."><br>
    <button id="unlockBtn">Unlock My Heart â¤ï¸</button>
</div>

<div id="dailyCard" class="card">
    <span id="dayEmoji" class="day-emoji">ğŸŒ¹</span>
    <h2 id="dayTitle">Happy Rose Day!</h2>
    <p id="dayMessage"></p>
    <button id="nextBtn">I Have a Question... ğŸ‘‰</button>
</div>

<div id="mainCard" class="card">
    <h2 id="questionText">Rishaâ€¦ will you be my Valentine? ğŸ’–</h2>
    <div class="buttons-row">
        <button id="yesBtn">Yes BABU ğŸ’•</button>
        <button id="noBtn">No ğŸ˜¢</button>
    </div>
    <div id="message" style="margin-top: 15px; font-weight: bold;"></div>
    <div id="counter" style="font-size: 12px; margin-top: 10px; opacity: 0.8;"></div>
    
    <button id="actionBtn" style="display:none; margin: 20xpx auto;"></button>
    <button id="voiceBtn"
        style="display:none; margin-top:12px; background:white; color:#ff2e63;">
    â–¶ï¸ Use Headphone ğŸ¥ºğŸ§
    </button>

    
    

    <div id="slideshow">
        <div class="slide active"><img src="photo1.jpeg"><p class="caption">The way you hug me... ğŸ¥º</p></div>
        <div class="slide"><img src="photo2.jpeg"><p class="caption">That smile is my favorite thing â¤ï¸</p></div>
        <div class="slide"><img src="photo3.jpeg"><p class="caption">Every moment with you is a gift.</p></div>
    </div>
</div>

<script>
  
const convinceTexts = [
  "Are you sure? ğŸ¥º",
  "Think again BABUâ€¦ ğŸ’•",
  "My heart will be sad ğŸ˜¢",
  "Okay butâ€¦ I really love you â¤ï¸",
  "Last chance ğŸ˜ŒğŸ’–"
];

/* --- CONFIGURATION --- */
const PASSWORD = "ALABU"; 
const WHATSAPP_NUMBER = "917478640411";

/* --- DAILY DATA --- */
const valentineData = {
    7: { emoji: "ğŸŒ¹", title: "Happy Rose Day!", msg: "A rose for the girl who makes my life smell like heaven.", btnText: "Send a Rose ğŸŒ¹", wa: "Happy Rose Day BABU! ğŸŒ¹\n\nI accepted your rose because you're the most beautiful flower in my garden." },
    8: { emoji: "ğŸ’", title: "Happy Propose Day!", msg: "I'm not just asking for today, I'm asking for every tomorrow.", btnText: "Send a Propose ğŸ’", wa: "Happy Propose Day! ğŸ’\n\nI said YES to being your Valentine!" },
    9: { emoji: "ğŸ«", title: "Happy Chocolate Day!", msg: "You're sweeter than Dairy Milk and silkier than Galaxy, BABU.", btnText: "Send a Chocolate ğŸ«", wa: "Happy Chocolate Day! ğŸ«\n\nEverything is sweeter when I'm with you." },
    10: { emoji: "ğŸ§¸", title: "Happy Teddy Day!", msg: "Sending you a virtual hug-machine since I'm not there to squeeze you.", btnText: "Send a Teddy ğŸ§¸", wa: "Happy Teddy Day! ğŸ§¸\n\nYou're my favorite teddy bear!" },
    11: { emoji: "ğŸ¤", title: "Happy Promise Day!", msg: "I promise to choose you, even on the days we don't understand each other.", btnText: "Send a Promise ğŸ¤", wa: "Happy Promise Day! ğŸ¤\n\nI promise to keep choosing you every single day." },
    12: { emoji: "ğŸ«‚", title: "Happy Hug Day!", msg: "Your hugs are my 'Safe Zone'. I miss being in your arms.", btnText: "Send a Hug ğŸ«‚", wa: "Happy Hug Day! ğŸ«‚\n\nI wish I could hug you for real right now." },
    13: { emoji: "ğŸ’‹", title: "Happy Kiss Day!", msg: "A million virtual kisses are waiting for you right here.", btnText: "Send a Kiss ğŸ’‹", wa: "Happy Kiss Day! ğŸ’‹\n\nMUAH! Happy Valentine's Week! â¤ï¸" },
    14: { emoji: "ğŸ’", title: "Happy Valentine's Day!", msg: "My heart found its home in you, Risha. Today and forever.", btnText: "Send Love ğŸ’–", wa: "HAPPY VALENTINE'S DAY BABU! ğŸ’–\n\nI love you more than words can say." }
};

const today = new Date();
const d = today.getDate();
const m = today.getMonth() + 1;

const lockScreen = document.getElementById("lockScreen");
const dailyCard = document.getElementById("dailyCard");
const mainCard = document.getElementById("mainCard");
    
const BG_NORMAL_VOL = 0.6;   // normal background level
const BG_DUCK_VOL   = 0.15;  // while voice plays
    
const bgMusic = document.getElementById("bgMusic");
bgMusic.volume = BG_NORMAL_VOL;
const actionBtn = document.getElementById("actionBtn");

function typeMessage(text, speed = 45) {
    message.innerHTML = "";
    let i = 0;

    const typing = setInterval(() => {
        message.innerHTML += text.charAt(i);
        i++;
        if (i >= text.length) clearInterval(typing);
    }, speed);
}

function heartbeatVibration() {
    if ("vibrate" in navigator) {
        navigator.vibrate([80, 40, 80, 40, 120]);
    }
}


// 1. Unlock Logic
document.getElementById("unlockBtn").onclick = () => {
    if(document.getElementById("password").value.toLowerCase() === PASSWORD.toLowerCase()) {
        lockScreen.style.display = "none";
        if(m === 2 && valentineData[d]) {
            const data = valentineData[d];
            document.getElementById("dayEmoji").innerText = data.emoji;
            document.getElementById("dayTitle").innerText = data.title;
            document.getElementById("dayMessage").innerText = data.msg;
            actionBtn.innerText = data.btnText; 
            dailyCard.style.display = "block";
        } else {
            actionBtn.innerText = "Send Love â¤ï¸";
            mainCard.style.display = "block";
        }
        bgMusic.play().catch(e => console.log("Music play blocked"));
    } else {
        alert("Wrong password, BABU! âŒ");
    }
};

document.getElementById("nextBtn").onclick = () => {
    dailyCard.style.display = "none";
    mainCard.style.display = "block";
};

// 2. Responsive "No" Button Logic
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
let escapes = 0;

function moveNo() {
    escapes++;

    const card = mainCard.getBoundingClientRect();
    const no   = noBtn.getBoundingClientRect();
    const yes  = yesBtn.getBoundingClientRect();

    const padding = 12;

    const maxX = card.width - no.width - padding;
    const maxY = card.height - no.height - padding;

    // YES position relative to card
    const yesRel = {
        left: yes.left - card.left,
        top: yes.top - card.top,
        right: yes.left - card.left + yes.width,
        bottom: yes.top - card.top + yes.height
    };

    let x, y, tries = 0;

    do {
        x = Math.random() * maxX;
        y = Math.random() * maxY;
        tries++;

        const noRel = {
            left: x,
            top: y,
            right: x + no.width,
            bottom: y + no.height
        };

        const overlap =
            !(noRel.right < yesRel.left ||
              noRel.left > yesRel.right ||
              noRel.bottom < yesRel.top ||
              noRel.top > yesRel.bottom);

        if (!overlap) break;

    } while (tries < 30); // strong safety limit

    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";

    /* ğŸ’¬ WhatsApp typing */
    if (escapes <= convinceTexts.length) {
        typeMessage(convinceTexts[escapes - 1]);
    }

    /* ğŸ’“ Heartbeat */
    heartbeatVibration();

    /* YES grows safely */
    yesBtn.style.transform = `scale(${1 + escapes * 0.12})`;
    yesBtn.classList.add("glow");

    counter.innerText = `Still saying no? ${escapes} times ğŸ˜†`;

    /* Auto YES */
    if (escapes >= 6) {
        typeMessage("Okayâ€¦ Iâ€™ll take that as a YES â¤ï¸");
        setTimeout(() => yesBtn.click(), 1200);
    }
}



noBtn.onmouseenter = moveNo;
noBtn.ontouchstart = (e) => {
    e.preventDefault();
    moveNo();
};

yesBtn.onclick = () => {

    // ğŸ’¥ START EVERYTHING IMMEDIATELY
    grandCelebration();

    const now = new Date();
    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    const tomorrow = new Date(today);
    tomorrow.setDate(today.getDate() + 1);

    const todayOnly = new Date().toDateString();

    const isTodayOrTomorrow =
        todayOnly === today.toDateString() ||
        todayOnly === tomorrow.toDateString();

    if (isTodayOrTomorrow) {

        // ğŸ–¼ï¸ IMAGE POPUP FIRST
        overlay.style.display = "block";
        imagePopup.style.display = "block";

        imageNextBtn.onclick = () => {
            imagePopup.style.display = "none";

            // ğŸ’Œ THEN MESSAGE POPUP
            tempPopup.style.display = "block";
        };

        closePopup.onclick = () => {
            overlay.style.display = "none";
            tempPopup.style.display = "none";
            completeLoveAction();
        };

    } else {
        completeLoveAction();
    }
};


function grandCelebration() {

    // ğŸŒ¹ Rose petals
    rosePetalRain();

    // ğŸŠ Emoji burst
    celebrationBurst();

    // ğŸ”Š Sound
    playCelebrationSound();

    // ğŸ’“ Strong romantic vibration
    navigator.vibrate?.([200, 80, 200, 80, 300]);
}


function celebrationBurst() {

    const emojis = ["ğŸ’–","ğŸŒ¹","ğŸ’","ğŸ‰","âœ¨","ğŸ¥°","ğŸ’•","ğŸŠ","ğŸ’—","ğŸ’","â¤ï¸"];

    for (let i = 0; i < 35; i++) {

        const e = document.createElement("div");
        e.className = "celebrate";

        e.innerText = emojis[Math.floor(Math.random() * emojis.length)];

        e.style.left = Math.random() * 100 + "vw";
        e.style.fontSize = (18 + Math.random() * 28) + "px";
        e.style.animationDuration = (2.5 + Math.random() * 2) + "s";

        document.body.appendChild(e);

        setTimeout(() => e.remove(), 4000);
    }
}


function playCelebrationSound() {
    const s = document.getElementById("celebrateSound");
    s.currentTime = 0;
    s.play().catch(()=>{});
}


function rosePetalRain() {

    const petals = ["ğŸŒ¹","ğŸŒº","ğŸŒ¸","ğŸ’®","ğŸƒ"];

    for (let i = 0; i < 40; i++) {

        const p = document.createElement("div");
        p.className = "petal";

        p.innerText = petals[Math.floor(Math.random() * petals.length)];

        p.style.left = Math.random() * 100 + "vw";
        p.style.fontSize = (18 + Math.random() * 22) + "px";
        p.style.animationDuration = (3 + Math.random() * 3) + "s";

        document.body.appendChild(p);

        setTimeout(() => p.remove(), 6000);
    }
}



// Move your original "Yes" logic into this helper function
function completeLoveAction() {
  
    celebrationBurst();
    rosePetalRain();          // ğŸŒ¹ falling petals
    playCelebrationSound();   // ğŸ‰ pop sound


    navigator.vibrate?.([150, 80, 150, 80, 200]);
    yesBtn.style.display = noBtn.style.display = "none";
    document.getElementById("questionText").style.display = "none";
    actionBtn.style.display = "inline-block";
    document.getElementById("message").innerHTML = "You're stuck with me now! â¤ï¸<br>I Love You!";
    document.getElementById("slideshow").style.display = "block";
    startSlideshow();
    voiceBtn.style.display = "inline-block";
}

actionBtn.onclick = () => {
    const defaultMsg = "Hey BABU! I love the surprise! â¤ï¸";
    const baseMsg = (m === 2 && valentineData[d]) ? valentineData[d].wa : defaultMsg;
    const extra = `
    Agar hona chaho meraâ€¦ toh shayad main tumhe kab ka apna maan chuki hoon,
    Tum bas keh do, main duniya se nahiâ€¦ khud se bhi lad jaaungi.
    
    Rona ho toh mere paas aanaâ€¦
    Tumhe sirf rone nahi doongi, apni saanson mein chhupa loongi,
    taaki tumhari har takleef mujh tak aakar khatam ho jaaye.
    
    Jahan tumhe chain nahi mil rahaâ€¦
    mera dil wahi tumhara ghar hai, hamesha se.
    Bas darr lagta haiâ€¦ kahin tum phir se door na chale jao.
    
    Tum rehna chaho toh reh jaana,
    main tumhe kabhi jaane ko nahi kahungiâ€¦
    kyunki tum sirf meri khushi nahi, meri aadatâ€¦ meri duaâ€¦ aur meri kami bhi ho. ğŸ¤
    
    (p.s. please unblock me, I promise not to disturb you frequently! ğŸ¥º)
    
    `;

    window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(baseMsg + extra)}`, "_blank");
};

const voiceBtn = document.getElementById("voiceBtn");
const voiceNote = document.getElementById("voiceNote");

voiceBtn.onclick = () => {
    voiceNote.currentTime = 0;

    // fade background music down
    fadeVolume(bgMusic, BG_DUCK_VOL, 500);

    voiceNote.play().catch(()=>{});

    // when voice ends, restore bg music
    voiceNote.onended = () => {
        fadeVolume(bgMusic, BG_NORMAL_VOL, 600);
    };
};
    
voiceNote.onplay = () => {
    typeMessage("Listen carefullyâ€¦ this is from my heart ğŸ’“");
};

function fadeVolume(audio, target, duration = 500) {
    const stepTime = 30;
    const steps = duration / stepTime;
    const start = audio.volume;
    const step = (target - start) / steps;
    let currentStep = 0;

    const fade = setInterval(() => {
        currentStep++;
        audio.volume = Math.min(1, Math.max(0, audio.volume + step));
        if (currentStep >= steps) {
            audio.volume = target;
            clearInterval(fade);
        }
    }, stepTime);
}


function startSlideshow() {
    let slides = document.querySelectorAll(".slide");
    let i = 0;
    setInterval(() => {
        slides.forEach(s => s.classList.remove("active"));
        i = (i + 1) % slides.length;
        slides[i].classList.add("active");
    }, 3500);
}

// Background Hearts
for(let i=0;i<15;i++){
    const h=document.createElement("div");
    h.className="heart";
    h.innerText=["â¤ï¸","ğŸ’–","ğŸ’•"][Math.floor(Math.random()*3)];
    h.style.left=Math.random()*100+"vw";
    h.style.animationDuration=4+Math.random()*4+"s";
    h.style.fontSize=12+Math.random()*20+"px";
    document.body.appendChild(h);
}
</script>
</body>
</html>
